/* JPEG Mask Plugin 1.0 */
(function(){$.fn.extend({mgJpegmask:function(b){b=b||"_mask";$(this).each(function(){if(window.CanvasRenderingContext2D){var c=$(this),j=$(this)[0];c.one("load",function(){c.css("display","none");var k=j.src.replace(/(.*)\.jpg$/,"$1"+b+".png"),i=document.createElement("img");i.src=k;var e=c.attr("height"),f=c.attr("width");i.onload=function(){var g=$("<canvas />");g.insertAfter(c);var a=g[0];a.width=f;a.height=e;var g=f*e,h=a.getContext("2d"),a=a.getContext("2d");h.drawImage(i,0,0);h=h.getImageData(0,
0,f,e);a.drawImage(j,0,0);for(var b=a.getImageData(0,0,f,e),d=0;d<g;d+=1)b.data[4*d+3]=255-h.data[4*d];a.putImageData(b,0,0)}})}else $(this).attr("src",$(this).attr("src").replace(/(.*)\.jpg$/,"$1.png"))});return this}})})(jQuery);