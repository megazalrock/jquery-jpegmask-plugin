/* JPEG Mask Plugin 1.0.1 */
(function(){$.fn.extend({mgJpegmask:function(c){c=c||"_mask";$(this).each(function(){if(window.CanvasRenderingContext2D){var d=$(this),k=$(this)[0];d.one("load",function(){d.css("display","none");var h=k.src.replace(/(.*)\.jpg$/,"$1"+c+".png"),i=document.createElement("img");i.src=h;var e=d.attr("height"),f=d.attr("width");i.onload=function(){var g=$("<canvas />");g.insertAfter(d);var a=g[0];a.width=f;a.height=e;var g=f*e,b=a.getContext("2d"),a=a.getContext("2d"),c,j;try{c=b.getImageData(0,0,f,e),
j=a.getImageData(0,0,f,e)}catch(h){console.error('Set "width" and "height" attr in IMG tag'),console.info("width",f),console.info("height",e),console.log(h)}b.drawImage(i,0,0);a.drawImage(k,0,0);for(b=0;b<g;b+=1)j.data[4*b+3]=255-c.data[4*b];a.putImageData(j,0,0)}})}else $(this).attr("src",$(this).attr("src").replace(/(.*)\.jpg$/,"$1.png"))});return this}})})(jQuery);